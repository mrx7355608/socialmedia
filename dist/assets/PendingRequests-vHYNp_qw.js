import{r as o,j as e,S as x,u as b}from"./index-w8OPScTq.js";import{E as j,s as f,f as m,u as y}from"./SuccessToast-ts7nQF6R.js";function g({requestID:t,updatePendingRequests:n}){const[u,s]=o.useState(!1),[a,c]=o.useState("");return e.jsxs(e.Fragment,{children:[u?e.jsx("button",{className:"flex-1 btn btn-accent",children:e.jsx(x,{})}):e.jsx("button",{onClick:async()=>await i(),className:"flex-1 btn btn-accent",children:"Accept"}),a?e.jsx(j,{error:a}):null]});async function i(){s(!0);const d=`/api/v1/friends/accept-request/${t}`,r={method:"PATCH",credentials:"include"};try{const l=await(await fetch(d,r)).json();s(!1),l.ok?n(l.data):c(l.error)}catch{c("An un-expected error occurred"),s(!1)}}}g.propTypes={requestID:f,updatePendingRequests:m};function h({requestID:t,updatePendingRequests:n}){const[u,s]=o.useState(!1),[a,c]=o.useState("");return e.jsxs(e.Fragment,{children:[u?e.jsx("button",{className:"flex-1 btn btn-ghost",children:e.jsx(x,{})}):e.jsx("button",{onClick:i,className:"flex-1 btn btn-ghost",children:"Reject"}),a?e.jsx(j,{error:a}):null]});async function i(){s(!0);const d=`/api/v1/friends/reject-request/${t}`,r={method:"PATCH",credentials:"include"};try{const l=await(await fetch(d,r)).json();s(!1),l.ok?n(l.data):c(l.error)}catch{c("An un-expected error occurred"),s(!1)}}}h.propTypes={requestID:f,updatePendingRequests:m};function q({request:t,updatePendingRequests:n}){return e.jsxs("div",{className:"flex flex-col items-start justify-center p-4 rounded-lg bg-gray-800 shadow w-full mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:t.profilePicture,alt:"profile picture",className:"w-12 h-12 rounded-full object-cover inline mr-3"}),e.jsx("p",{className:"text-gray-300 font-medium text-lg mb-0",children:t.fullname})]}),e.jsxs("div",{className:"flex w-full gap-2 mt-4",children:[e.jsx(g,{requestID:t._id,updatePendingRequests:n}),e.jsx(h,{requestID:t._id,updatePendingRequests:n})]})]})}q.propTypes={request:{_id:f,fullname:f,profilePicture:f},updatePendingRequests:m};function P(){const{user:t,setUser:n}=b(),[u,s]=o.useState([]),{loading:a,error:c,resp:i}=y("/api/v1/friends/pending-requests");if(o.useEffect(()=>{i&&s(i)},[i]),a)return e.jsx("div",{className:"flex items-center justify-center mx-auto w-1/2 min-h-screen",children:e.jsx(x,{})});if(c)return e.jsx("div",{className:"flex items-center justify-center mx-auto w-1/2 min-h-screen",children:e.jsx("p",{className:"text-red-400 text-lg",children:c})});return e.jsxs("div",{className:"flex flex-col items-center justify-start p-3 w-full lg:w-1/3 mx-auto",children:[e.jsx("h1",{className:"font-bold text-gray-200 text-left text-3xl p-4 my-4 mb-7",children:"Pending Requests"}),u.map(r=>e.jsx(q,{request:r,updatePendingRequests:d},r._id))]});function d(r){s(r),n({...t,pending_requests:r})}}export{P as default};
