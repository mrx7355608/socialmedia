import{r as o,u as g,j as e,S as u}from"./index-w8OPScTq.js";import{E as b,s as d,f as y,u as v}from"./SuccessToast-ts7nQF6R.js";function f({friend:n,updateFriendsStateValue:a}){const[c,s]=o.useState(!1),[t,i]=o.useState(""),{user:r,setUser:m}=g();return e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-gray-800 shadow w-full mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:n.profilePicture,alt:"profile picture",className:"w-12 h-12 rounded-full object-cover inline mr-3"}),e.jsx("p",{className:"text-md font-bold lg:text-lg text-gray-300 mb-0",children:n.fullname})]}),c?e.jsx("button",{className:"btn btn-error",children:e.jsx(u,{})}):e.jsx("button",{className:"btn btn-error",onClick:x,children:"Remove"}),t&&e.jsx(b,{error:t})]});async function x(){const p=`/api/v1/friends/remove-friend/${n._id}`,j={method:"PATCH",credentials:"include"};try{s(!0);const l=await(await fetch(p,j)).json();s(!1),l.ok?(a(l.data),m({...r,friends:l.data})):i(l.error)}catch{s(!1),i("An un-expected error occurred")}}}f.propTypes={friend:{_id:d,fullname:d,profilePicture:d},updateFriendsStateValue:y};function F(){const[n,a]=o.useState([]),{loading:c,error:s,resp:t}=v("/api/v1/friends");if(o.useEffect(()=>{t&&a(t)},[t]),c)return e.jsx("div",{className:"flex items-center justify-center mx-auto w-1/2 min-h-screen",children:e.jsx(u,{})});if(s)return e.jsx("div",{className:"flex items-center justify-center mx-auto w-1/2 min-h-screen",children:e.jsx("p",{className:"text-red-400 text-lg",children:s})});return e.jsxs("div",{className:"p-3 w-full flex flex-col items-center justify-start lg:w-1/3 mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-200 text-left lg:text-3xl p-4 my-4 mb-7",children:"Friends"}),n.map(r=>e.jsx(f,{friend:r,updateFriendsStateValue:i},r._id))]});function i(r){console.log("asdfasdf"),a(r)}}export{F as default};
