import{r as p,j as e,S as f,u as x,L as g}from"./index-w8OPScTq.js";import{S as h}from"./SocialLoginButtons-6r7RMzpy.js";function b(){const[a,s]=p.useState(!1),[l,t]=p.useState("");async function u(i){s(!0);const n="doemiclic",d=new FormData;d.append("upload_preset","socialmedia"),d.append("file",i);const o=`https://api.cloudinary.com/v1_1/${n}/upload`,c={method:"POST",body:d};try{return(await(await fetch(o,c)).json()).secure_url}catch{t("An un-expected error occured"),s(!1)}}async function r(i){if(!i)return t("No image selected");const n=await u(i),d="/api/v1/user",o={method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({profilePicture:n})};try{const m=await(await fetch(d,o)).json();return s(!1),m.ok===!1?(t(m.error),null):m.ok}catch{t("An un-expected error occured"),s(!1)}}return{loading:a,apiError:l,uploadProfilePicture:r}}function w({changePage:a,signedUpUser:s}){const{loading:l,apiError:t,uploadProfilePicture:u}=b(),[r,i]=p.useState(s.profilePicture),n=p.useRef();return e.jsx("div",{className:"mx-auto flex items-center justify-center lg:w-1/2 shadow-xl bg-gray-800 h-max p-6 rounded-lg",style:{width:"95vw"},children:e.jsxs("div",{className:"flex flex-col w-full justify-center items-center",children:[e.jsx("h1",{className:"text-3xl text-gray-200 font-bold mb-10 mt-4",children:"Change Profile picture"}),t&&e.jsx("p",{className:"font-medium mb-5 w-full max-w-md p-3 rounded-lg bg-red-200 text-red-900",children:t}),e.jsx("img",{src:r,alt:"user profile picture",className:"w-28 h-28 rounded-full border-4 border-gray-400 object-cover"}),e.jsx("input",{ref:n,type:"file",className:"file-input file-input-bordered file-input-accent w-full max-w-xs mt-8",onChange:d}),e.jsxs("div",{className:"flex justify-between w-full mt-3",children:[e.jsx("button",{onClick:a,className:"btn bg-transparent border-0 outline-0 hover:bg-gray-900",children:"Skip"}),e.jsx("button",{onClick:o,className:"btn btn-outline btn-accent",children:l?e.jsx(f,{}):"Continue"})]})]})});function d(c){i(URL.createObjectURL(c.target.files[0]))}async function o(){const c=n.current.files[0];await u(c)&&a()}}function y({signedUpUser:a}){const[s,l]=p.useState(""),[t,u]=p.useState(!1),{setUser:r}=x(),i=async()=>{u(!0),await(await fetch("/api/v1/user",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({bio:s})})).json(),u(!1),r(a)};return e.jsx("div",{className:"mx-auto flex items-center justify-center lg:w-1/2 shadow-xl bg-gray-800 h-max p-6 rounded-lg",style:{width:"95vw"},children:e.jsxs("div",{className:"w-full",children:[e.jsx("h1",{className:"text-3xl text-gray-200 font-bold mb-4 text-center mt-3",children:"Update Bio"}),e.jsx("textarea",{className:"textarea textarea-primary resize-none bg-transparent w-full mb-3",placeholder:"Let people know about you.",rows:4,onChange:n=>l(n.target.value)}),e.jsx("button",{className:"btn btn-primary",onClick:i,children:t?e.jsx(f,{}):"Complete"})]})})}function j(){const[a,s]=p.useState(!1),[l,t]=p.useState("");return{loading:a,apiError:l,signup:async r=>{s(!0);const i="/api/v1/auth/signup",n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r),credentials:"include"};try{const o=await(await fetch(i,n)).json();return s(!1),o.ok===!1?(t(o.error),setTimeout(()=>t(""),4e3),null):o.data}catch{t("An un-expected error occured"),s(!1)}}}}function N({changePage:a,setSignedUpUser:s}){const{loading:l,apiError:t,signup:u}=j(),[r,i]=p.useState({firstname:"",lastname:"",email:"",password:"",confirm_password:""});return e.jsxs("div",{className:"flex flex-col lg:flex-row w-full p-4 lg:w-3/4 gap-0 items-center justify-center mx-auto",children:[e.jsxs("form",{method:"post",className:"flex-1 p-0 mt-5",onSubmit:d,children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-200 mb-12",children:"Create your account"}),t&&e.jsx("p",{className:"text-sm lg:text-md text-red-900 font-medium p-3 bg-red-200 rounded-lg w-full mb-6",children:t}),e.jsx("input",{type:"text",className:"input input-bordered w-full bg-transparent border-2 mb-4",name:"firstname",placeholder:"First name",onChange:n}),e.jsx("input",{type:"text",className:"input input-bordered w-full bg-transparent border-2 mb-4",name:"lastname",placeholder:"Last name",onChange:n}),e.jsx("input",{type:"email",className:"input input-bordered w-full bg-transparent border-2 mb-4",name:"email",placeholder:"Email address",onChange:n}),e.jsx("input",{type:"password",placeholder:"Password",className:"input input-bordered w-full bg-transparent border-2 mb-4",name:"password",onChange:n}),e.jsx("input",{type:"password",placeholder:"Confirm Password",className:"input input-bordered w-full bg-transparent border-2",name:"confirm_password",onChange:n}),e.jsx("button",{type:"submit",className:"btn btn-primary w-full font-medium rounded-full mt-8",children:l?e.jsx(f,{}):"Signup"}),e.jsxs("p",{className:"text-sm lg:text-md text-gray-400 w-full text-center mt-4",children:["Already have an account?"," ",e.jsx(g,{to:"/auth/login",className:"font-medium text-primary",children:"Login"})]})]}),e.jsx("hr",{className:"w-full my-8 lg:w-48 lg:rotate-90 border-gray-800 max-w-md"}),e.jsx(h,{})]});function n(o){const{name:c,value:m}=o.target;i({...r,[c]:m})}async function d(o){o.preventDefault();const c=await u(r);c&&(s(c),a())}}function v(){const[a,s]=p.useState(null),[l,t]=p.useState(0),u=[e.jsx(N,{changePage:r,setSignedUpUser:s},0),e.jsx(w,{changePage:r,signedUpUser:a},1),e.jsx(y,{changePage:r,signedUpUser:a},2)];return e.jsx("div",{className:"w-full",children:u[l]});function r(){t(l+1)}}export{v as default};
